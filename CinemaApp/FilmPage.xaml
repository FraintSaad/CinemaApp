<Page
    x:Class="CinemaApp.FilmPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:CinemaApp"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:models="using:CinemaApp.Models" xmlns:local1="using:CinemaApp.Converters"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>
        <local1:VisibleConverter x:Key="VisibleConverter"/>
        <SolidColorBrush x:Key="DarkBackgroundBrush" Color="#252526"/>
        <SolidColorBrush x:Key="GoldAccentBrush" Color="#FFD700"/>
        <SolidColorBrush x:Key="LightTextBrush" Color="#A0A0A0"/>
    </Page.Resources>

    <Page.TopAppBar>
        <CommandBar Height="auto" DefaultLabelPosition="Right">
            <CommandBar.Content>
                <AppBarButton Icon="Back" Click="BackButton_Click" Foreground="Black"/>
            </CommandBar.Content>
        </CommandBar>
    </Page.TopAppBar>
    <Grid>
        <Grid.Background>
            <ImageBrush ImageSource="{x:Bind CurrentFilm.PosterUrlPreview, Mode=OneWay}" Stretch="UniformToFill" Opacity="0.1"/>
        </Grid.Background>
        <ScrollViewer Padding="0" VerticalScrollBarVisibility="Auto">
            <Grid Margin="20" x:Name="FilmGrid">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" MinWidth="300"/>
                    <ColumnDefinition Width="*" MinWidth="400"/>
                </Grid.ColumnDefinitions>
                <Image Source="{x:Bind CurrentFilm.PosterUrlPreview, Mode=OneWay}" Stretch="UniformToFill" Height="600" Margin="0,0,20,0" Grid.Column="0" VerticalAlignment="Top"/>

                <StackPanel Grid.Column="1" Margin="0,20,0,0">
                    <StackPanel>
                        <TextBlock Text="{x:Bind CurrentFilm.NameRu}" Foreground="Black" FontSize="36"  FontWeight="SemiBold" LineHeight="32" TextWrapping="Wrap"/>
                        <TextBlock Text="{x:Bind CurrentFilm.NameOriginal}" Foreground="Black" FontSize="30" FontStyle="Italic" Margin="0,5,0,15"/>
                    </StackPanel>

                    <Border Height="1" Margin="0,15,0,15" Background="{StaticResource GoldAccentBrush}" Opacity="0.3"/>

                    <Grid Margin="0,15,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Orientation="Horizontal" Spacing="8" Grid.Column="0">
                            <FontIcon Glyph="" Foreground="{StaticResource GoldAccentBrush}" FontSize="16"/>
                            <TextBlock Text="Кинопоиск:" Foreground="{StaticResource GoldAccentBrush}" VerticalAlignment="Center"/>
                            <TextBlock Text="{x:Bind CurrentFilm.RatingKinopoisk, Mode=OneWay}" Foreground="{StaticResource GoldAccentBrush}" FontWeight="SemiBold" VerticalAlignment="Center"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Spacing="8" Grid.Column="1" Margin="30,0,0,0">
                            <FontIcon Glyph="" Foreground="DodgerBlue" FontSize="16"/>
                            <TextBlock Text="IMDb:" Foreground="DodgerBlue" VerticalAlignment="Center"/>
                            <TextBlock Text="{x:Bind CurrentFilm.RatingImdb, Mode=OneWay}" Foreground="DodgerBlue" FontWeight="SemiBold" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>

                    <Border Height="1" Margin="0,15,0,15" Background="{StaticResource GoldAccentBrush}" Opacity="0.3"/>

                    <StackPanel Margin="0,20,0,0" Spacing="10">
                        <TextBlock Text="О фильме" Foreground="{StaticResource GoldAccentBrush}" FontSize="24" FontWeight="SemiBold"/>

                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="Год:" Foreground="{StaticResource LightTextBrush}" Grid.Row="0" Grid.Column="0"/>
                            <TextBlock Text="{x:Bind CurrentFilm.Year}" Foreground="Black" Grid.Row="0" Grid.Column="1"/>
                            <TextBlock Text="Страны:" Foreground="{StaticResource LightTextBrush}" Grid.Row="1" Grid.Column="0" Margin="0,15,0,0"/>
                            <TextBlock Text="{x:Bind GetCountriesString(CurrentFilm.Countries)}" Foreground="Black" Grid.Row="1" Grid.Column="1" Margin="0,15,0,0" TextWrapping="Wrap"/>
                            <TextBlock Text="Жанры:" Foreground="{StaticResource LightTextBrush}" Grid.Row="2" Grid.Column="0" Margin="0,15,0,0"/>
                            <TextBlock Text="{x:Bind GetGenresString(CurrentFilm.Genres)}" Foreground="Black" Grid.Row="2" Grid.Column="1" Margin="0,15,0,0" TextWrapping="Wrap"/>
                        </Grid>
                    </StackPanel>

                    <Border Height="1" Margin="0,25,0,25" Background="{StaticResource GoldAccentBrush}" Opacity="0.3"/>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                        <Button x:Name="AddToFavoritesBtn" Content="Добавить в избранное" Click="AddToFavoritesBtn_Click" PointerEntered="CursorEntered_PointerEntered" PointerExited="CursorExited_PointerExited"
                               Visibility="{x:Bind CurrentFilm.IsInFavorites, Mode=OneWay, Converter={StaticResource VisibleConverter}, ConverterParameter=add}" 
                               Background="Black" BorderBrush="{StaticResource GoldAccentBrush}" Foreground="White" Padding="24,12" MinWidth="200" CornerRadius="4" FontSize="16"/>

                        <Button x:Name="DeleteFromFavoritesBtn" Content="Удалить из избранного" Click="DeleteFromFavoritesBtn_Click" PointerEntered="CursorEntered_PointerEntered" PointerExited="CursorExited_PointerExited"
                               Visibility="{x:Bind CurrentFilm.IsInFavorites, Mode=OneWay, Converter={StaticResource VisibleConverter}}"  
                               Background="Black" BorderBrush="Red" Foreground="White" Padding="24,12" MinWidth="200" CornerRadius="4" FontSize="16"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </ScrollViewer>
    </Grid>
</Page>
